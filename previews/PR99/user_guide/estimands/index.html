<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Estimands · TMLE.jl</title><meta name="title" content="Estimands · TMLE.jl"/><meta property="og:title" content="Estimands · TMLE.jl"/><meta property="twitter:title" content="Estimands · TMLE.jl"/><meta name="description" content="Documentation for TMLE.jl."/><meta property="og:description" content="Documentation for TMLE.jl."/><meta property="twitter:description" content="Documentation for TMLE.jl."/><meta property="og:url" content="https://TARGENE.github.io/TMLE.jl/user_guide/estimands/"/><meta property="twitter:url" content="https://TARGENE.github.io/TMLE.jl/user_guide/estimands/"/><link rel="canonical" href="https://TARGENE.github.io/TMLE.jl/user_guide/estimands/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/logo.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="TMLE.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TMLE.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../walk_through/">Walk Through</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../scm/">Structural Causal Models</a></li><li class="is-active"><a class="tocitem" href>Estimands</a><ul class="internal"><li><a class="tocitem" href="#The-Counterfactual-Mean-(CM)"><span>The Counterfactual Mean (CM)</span></a></li><li><a class="tocitem" href="#The-Average-Treatment-Effect"><span>The Average Treatment Effect</span></a></li><li><a class="tocitem" href="#The-Interaction-Average-Treatment-Effect"><span>The Interaction Average Treatment Effect</span></a></li><li><a class="tocitem" href="#Composed-Estimands"><span>Composed Estimands</span></a></li></ul></li><li><a class="tocitem" href="../estimation/">Estimation</a></li><li><a class="tocitem" href="../misc/">Miscellaneous</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/super_learning/">Becoming a Super Learner</a></li><li><a class="tocitem" href="../../examples/double_robustness/">Model Misspecification &amp; Double Robustness</a></li></ul></li><li><a class="tocitem" href="../../resources/">Resources</a></li><li><a class="tocitem" href="../../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Estimands</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Estimands</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TARGENE/TMLE.jl/blob/main/docs/src/user_guide/estimands.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Estimands"><a class="docs-heading-anchor" href="#Estimands">Estimands</a><a id="Estimands-1"></a><a class="docs-heading-anchor-permalink" href="#Estimands" title="Permalink"></a></h1><p>Most causal questions can be translated into a causal estimand. Usually either an interventional or counterfactual quantity. What would have been the outcome if I had set this variable to this value? When identified, this causal estimand translates to a statistical estimand which can be estimated from data. From a mathematical standpoint, an estimand (<span>$\Psi$</span>) is a functional, that is a function that takes as input a probability distribution (from a model <span>$\mathcal{M}$</span>), and outputs a real number or vector of real numbers.</p><p class="math-container">\[\Psi: \mathcal{M} \rightarrow \mathbb{R}^p\]</p><p>At the moment, most of the work in this package has been focused on estimands that are composite functions of the counterfactual mean which is easily identified via backdoor adjustment and for which the gradient is well known.</p><p>In what follows, <span>$P$</span> is a probability distribution generating an outcome <span>$Y$</span>, a random vector of &quot;treatment&quot; variables <span>$\textbf{T}$</span> and a random vector of &quot;confounding&quot; variables <span>$\textbf{W}$</span>. For the examples, we will assume two treatment variables <span>$T₁$</span> and <span>$T₂$</span> taking either values 0 or 1. The <span>$SCM$</span> is given by:</p><pre><code class="language-julia hljs">using TMLE
scm = StaticSCM(
    outcomes=[:Y],
    treatments=[:T₁, :T₂],
    confounders=[:W]
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SCM
---
T₁ = f₂(W)
T₂ = f₃(W)
Y = f₁(W, T₁, T₂)
</code></pre><h2 id="The-Counterfactual-Mean-(CM)"><a class="docs-heading-anchor" href="#The-Counterfactual-Mean-(CM)">The Counterfactual Mean (CM)</a><a id="The-Counterfactual-Mean-(CM)-1"></a><a class="docs-heading-anchor-permalink" href="#The-Counterfactual-Mean-(CM)" title="Permalink"></a></h2><ul><li>Causal Question:</li></ul><p>What would have been the mean of <span>$Y$</span> had we set <span>$\textbf{T}=\textbf{t}$</span>?</p><ul><li>Causal Estimand:</li></ul><p class="math-container">\[CM_{\textbf{t}}(P) = \mathbb{E}[Y|do(\textbf{T}=\textbf{t})]\]</p><ul><li>Statistical Estimand (via backdoor adjustment):</li></ul><p class="math-container">\[CM_{\textbf{t}}(P) = \mathbb{E}_{\textbf{W}}[\mathbb{E}[Y|\textbf{T}=\textbf{t}, \textbf{W}]]\]</p><ul><li>TMLE.jl Example</li></ul><p>A causal estimand is given by:</p><pre><code class="language-julia hljs">causalΨ = CM(outcome=:Y, treatment_values=(T₁=1, T₂=0))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.CausalCM(:Y, (T₁ = 1, T₂ = 0))
</code></pre><p>A corresponding statistical estimand can be identified via backdoor adjustment using the <code>scm</code>:</p><pre><code class="language-julia hljs">statisticalΨ = identify(causalΨ, scm)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.StatisticalCM
-----
Outcome: Y
Treatment: (T₁ = 1, T₂ = 0)
</code></pre><p>or defined directly:</p><pre><code class="language-julia hljs">statisticalΨ = CM(
    outcome=:Y,
    treatment_values=(T₁=1, T₂=0),
    treatment_confounders=(T₁=[:W], T₂=[:W])
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.StatisticalCM
-----
Outcome: Y
Treatment: (T₁ = 1, T₂ = 0)
</code></pre><h2 id="The-Average-Treatment-Effect"><a class="docs-heading-anchor" href="#The-Average-Treatment-Effect">The Average Treatment Effect</a><a id="The-Average-Treatment-Effect-1"></a><a class="docs-heading-anchor-permalink" href="#The-Average-Treatment-Effect" title="Permalink"></a></h2><ul><li>Causal Question:</li></ul><p>What would be the average difference on <span>$Y$</span> if we switch the treatment levels from <span>$\textbf{t}_1$</span> to <span>$\textbf{t}_2$</span>?</p><ul><li>Causal Estimand:</li></ul><p class="math-container">\[ATE_{\textbf{t}_1 \rightarrow \textbf{t}_2}(P) = \mathbb{E}[Y|do(\textbf{T}=\textbf{t}_2)] - \mathbb{E}[Y|do(\textbf{T}=\textbf{t}_1)]\]</p><ul><li>Statistical Estimand (via backdoor adjustment):</li></ul><p class="math-container">\[\begin{aligned}
ATE_{\textbf{t}_1 \rightarrow \textbf{t}_2}(P) &amp;= CM_{\textbf{t}_2}(P) - CM_{\textbf{t}_1}(P) \\
&amp;= \mathbb{E}_{\textbf{W}}[\mathbb{E}[Y|\textbf{T}=\textbf{t}_2, \textbf{W}] - \mathbb{E}[Y|\textbf{T}=\textbf{t}_1, \textbf{W}]]
\end{aligned}\]</p><ul><li>TMLE.jl Example</li></ul><p>A causal estimand is given by:</p><pre><code class="language-julia hljs">causalΨ = ATE(
    outcome=:Y,
    treatment_values=(
        T₁=(case=1, control=0),
        T₂=(case=1, control=0)
    )
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.CausalATE(:Y, (T₁ = (case = 1, control = 0), T₂ = (case = 1, control = 0)))
</code></pre><p>A corresponding statistical estimand can be identified via backdoor adjustment using the <code>scm</code>:</p><pre><code class="language-julia hljs">statisticalΨ = identify(causalΨ, scm)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.StatisticalATE
-----
Outcome: Y
Treatment: (T₁ = (case = 1, control = 0), T₂ = (case = 1, control = 0))
</code></pre><p>or defined directly:</p><pre><code class="language-julia hljs">statisticalΨ = ATE(
    outcome=:Y,
    treatment_values=(
        T₁=(case=1, control=0),
        T₂=(case=1, control=0)
    ),
    treatment_confounders=(T₁=[:W], T₂=[:W])
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.StatisticalATE
-----
Outcome: Y
Treatment: (T₁ = (case = 1, control = 0), T₂ = (case = 1, control = 0))
</code></pre><ul><li>generating all <span>$ATEs$</span></li></ul><p>It is possible to generate all possible ATEs from a set of treatment values or from a dataset. For that purpose, use the <code>generateATEs</code> function.</p><h2 id="The-Interaction-Average-Treatment-Effect"><a class="docs-heading-anchor" href="#The-Interaction-Average-Treatment-Effect">The Interaction Average Treatment Effect</a><a id="The-Interaction-Average-Treatment-Effect-1"></a><a class="docs-heading-anchor-permalink" href="#The-Interaction-Average-Treatment-Effect" title="Permalink"></a></h2><ul><li>Causal Question:</li></ul><p>Interactions can be defined up to any order but we restrict the interpretation to two variables. Is the Total Average Treatment Effect of <span>$T₁$</span> and <span>$T₂$</span> different from the sum of their respective marginal Average Treatment Effects? Is there a synergistic additive effect between <span>$T₁$</span> and <span>$T₂$</span> on <span>$Y$</span>.</p><p>For a general higher-order definition, please refer to <a href="https://arxiv.org/abs/2006.06010">Higher-order interactions in statistical physics and machine learning: A model-independent solution to the inverse problem at equilibrium</a>.</p><ul><li>Causal Estimand:</li></ul><p>For two points interaction with both treatment and control levels <span>$0$</span> and <span>$1$</span> for ease of notation:</p><p class="math-container">\[IATE_{0 \rightarrow 1, 0 \rightarrow 1}(P) = \mathbb{E}[Y|do(T_1=1, T_2=1)] - \mathbb{E}[Y|do(T_1=1, T_2=0)]  \\
- \mathbb{E}[Y|do(T_1=0, T_2=1)] + \mathbb{E}[Y|do(T_1=0, T_2=0)] \]</p><ul><li>Statistical Estimand (via backdoor adjustment):</li></ul><p class="math-container">\[IATE_{0 \rightarrow 1, 0 \rightarrow 1}(P) = \mathbb{E}_{\textbf{W}}[\mathbb{E}[Y|T_1=1, T_2=1, \textbf{W}]] - \mathbb{E}[Y|T_1=1, T_2=0, \textbf{W}]  \\
- \mathbb{E}[Y|T_1=0, T_2=1, \textbf{W}] + \mathbb{E}[Y|T_1=0, T_2=0, \textbf{W}]] \]</p><ul><li>TMLE.jl Example</li></ul><p>A causal estimand is given by:</p><pre><code class="language-julia hljs">causalΨ = IATE(
    outcome=:Y,
    treatment_values=(
        T₁=(case=1, control=0),
        T₂=(case=1, control=0)
    )
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.CausalIATE(:Y, (T₁ = (case = 1, control = 0), T₂ = (case = 1, control = 0)))
</code></pre><p>A corresponding statistical estimand can be identified via backdoor adjustment using the <code>scm</code>:</p><pre><code class="language-julia hljs">statisticalΨ = identify(causalΨ, scm)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.StatisticalIATE
-----
Outcome: Y
Treatment: (T₁ = (case = 1, control = 0), T₂ = (case = 1, control = 0))
</code></pre><p>or defined directly:</p><pre><code class="language-julia hljs">statisticalΨ = IATE(
    outcome=:Y,
    treatment_values=(
        T₁=(case=1, control=0),
        T₂=(case=1, control=0)
    ),
    treatment_confounders=(T₁=[:W], T₂=[:W])
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TMLE.StatisticalIATE
-----
Outcome: Y
Treatment: (T₁ = (case = 1, control = 0), T₂ = (case = 1, control = 0))
</code></pre><h2 id="Composed-Estimands"><a class="docs-heading-anchor" href="#Composed-Estimands">Composed Estimands</a><a id="Composed-Estimands-1"></a><a class="docs-heading-anchor-permalink" href="#Composed-Estimands" title="Permalink"></a></h2><p>As a result of Julia&#39;s automatic differentiation facilities, given a set of predefined estimands <span>$(\Psi_1, ..., \Psi_k)$</span>, we can automatically compute an estimator for <span>$f(\Psi_1, ..., \Psi_k)$</span>. This is done via the <code>ComposedEstimand</code> type.</p><p>For example, the difference in ATE for a treatment with 3 levels (0, 1, 2) can be defined as follows:</p><pre><code class="language-julia hljs">ATE₁ = ATE(
    outcome = :Y, 
    treatment_values = (T = (control = 0, case = 1),),
    treatment_confounders = [:W]
    )
ATE₂ = ATE(
    outcome = :Y, 
    treatment_values = (T = (control = 1, case = 2),),
    treatment_confounders = [:W]
    )
ATEdiff = ComposedEstimand(-, (ATE₁, ATE₂))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../scm/">« Structural Causal Models</a><a class="docs-footer-nextpage" href="../estimation/">Estimation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 18 December 2023 18:40">Monday 18 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
